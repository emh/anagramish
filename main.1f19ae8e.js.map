{"version":3,"sources":["theme.js","virtual-keyboard.mjs","game-board.mjs","utils.mjs","game-stars.mjs","popup-message.mjs","popup-help.mjs","summary-chart.mjs","history-chart.mjs","popup-stats.mjs","words.mjs","main.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["DEFAULT_THEME","ThemeManager","theme","localStorage","getItem","window","matchMedia","matches","setTheme","setItem","document","documentElement","setAttribute","removeItem","removeAttribute","VirtualKeyboard","keys","shadowRoot","attachShadow","mode","style","createElement","textContent","append","row","rowDiv","key","keyDiv","className","disabled","control","value","addEventListener","keyPress","dispatchEvent","CustomEvent","detail","HTMLElement","customElements","define","GameBoard","state","interactive","startWord","words","endWord","flipped","reverse","forEach","w","y","actualY","l","x","cell","classList","add","indexOf","finished","position","letterPress","backspacePress","enterPress","trashPress","letter","numStars","s","Math","max","floor","loadFile","file","fetch","then","response","text","split","d","Date","getFullYear","String","getMonth","padStart","getDate","level","parse","getHistory","JSON","putHistory","history","stringify","isEmpty","obj","Object","length","isFinished","every","GameStars","seconds","n","i","star","opacity","PopupMessage","type","template","content","cloneNode","e","handleClick","event","target","nodeName","name","innerHTML","PopupHelp","game0","getElementById","game1","game2","game3","game4","game5","stars","SummaryChart","stats","div","id","HistoryChart","console","log","map","entry","repeat","date","join","levelFromCount","count","PopupStats","summaryStats","historyStats","sort","k","game","pair","numSeconds","push","summaryDiv","historyDiv","sortByCh","str","toUpperCase","compare","ch1","ch2","slice","compareWords","w1","w2","isLetter","goal","clicky","error","loadGame","saveGame","pairs","pieces","Number","countForLevel","pow","checkCount","minCount","maxCount","calcIndex","f","PI","valueOf","r","choosePair","filteredPairs","filter","renderBoard","container","gameBoard","setupBoardHandler","renderKeyboard","validLetters","includes","keyboard","initWords","calculateStats","streak","pk","initTodaysGame","flips","trashes","guesses","init","dict","started","newUser","handleBackspace","handleLetterInput","emojiletters","a","b","c","g","h","j","m","o","p","q","t","u","v","z","black","yellow","timer","flip","trash","guess","emojiWord","word","emojiLevel","time","emojiStats","showSuccess","message","app","popup","share","data","title","navigator","canShare","querySelector","visibility","clipboard","writeText","removeChild","appendChild","handleEnter","previousWord","nextWord","firstWord","lastWord","hasNextWord","classesFor","classes","renderWord","letters","showError","clearInterval","handleDeleteWord","emptyWord","handleFlip","findLastIndex","findIndex","clearPopup","setupKeyboardHandler","startsWith","toLowerCase","finshed","showHelp","showStats","showPopup","Promise","resolve","renderStars","startClock","fn","setInterval","render","fixHistoryDates","match","newKey","main","pairsFile","dictFile","themeManager","help","preventDefault","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","generated","js","clear","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","stack","overlay","createErrorOverlay","body","remove","stackTrace","innerText","getParents","modules","parents","dep","Array","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"main.1f19ae8e.js","sourceRoot":"../src","sourcesContent":["// vim: tabstop=4 expandtab shiftwidth=4 softtabstop=4\nconst DEFAULT_THEME = 'light';\n\nclass ThemeManager {\n  constructor() {\n    this.theme = localStorage.getItem('theme');\n\n    if (this.theme === null) {\n        this.theme = (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');\n    }\n    this.setTheme(this.theme);\n  }\n\n  setTheme(theme) {\n      this.theme = theme;\n\n      if (theme) {\n          if (theme !== DEFAULT_THEME) {\n            localStorage.setItem('theme', theme);\n          }\n          document.documentElement.setAttribute('data-theme', theme);\n      } else {\n          localStorage.removeItem('theme');\n          document.documentElement.removeAttribute('data-theme');\n      }\n  }\n\n  clearTheme() {\n      this.setTheme(null);\n  }\n}\n\nexport { ThemeManager }\n","export class VirtualKeyboard extends HTMLElement {\n    constructor(keys) {\n        super();\n\n        const shadowRoot = this.attachShadow({ mode: 'open' });\n        const style = document.createElement('style');\n\n        style.textContent = `\n            :host { \n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                gap: 5px;\n                cursor: pointer;\n            }\n\n            :host > div {\n                display: flex;\n                gap: 5px;\n                height: 48px;\n            }\n\n            .key {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                border: solid 1px var(--key-border-color);\n                border-radius: var(--letter-border-radius);\n                background-color: var(--key-background-color);\n                color: var(--key-color);\n                height: 40px;\n                width: 40px;\n                font-size: 24px;\n                text-transform: uppercase;\n                box-sizing: border-box;\n            }\n\n            .control {\n                width: 90px;\n            }\n\n            .disabled {\n                opacity: 0.1;\n            }\n        `;\n        shadowRoot.append(style);\n\n        for (let row of keys) {\n            const rowDiv = document.createElement('div');\n\n            for (let key of row) {\n                const keyDiv = document.createElement('div');\n\n                keyDiv.className = `key${key.disabled ? ' disabled' : ''}${key.control ? ' control' : ''}`;\n                keyDiv.textContent = key.value;\n                if (!key.disabled) keyDiv.addEventListener('click', () => this.keyPress(key.value));\n                rowDiv.append(keyDiv);\n            }\n\n            shadowRoot.append(rowDiv);\n        }\n    }\n\n    keyPress(key) {\n        this.dispatchEvent(new CustomEvent('keypress', { detail: { key } }));\n    }\n}\n\ncustomElements.define('virtual-keyboard', VirtualKeyboard);\n","export class GameBoard extends HTMLElement {\n    constructor(state, interactive=true) {\n        super();\n\n        const shadowRoot = this.attachShadow({ mode: 'open' });\n        const style = document.createElement('style');\n\n        style.textContent = `\n            :host {\n                display: grid;\n                grid-template-rows: repeat(6, 1fr);\n                gap: 5px;\n                ${interactive ? 'margin-left: 110px;' : ''}\n                user-select: none;\n            }\n\n            .row {\n                display: grid;\n                grid-template-columns: repeat(${interactive ? 7 : 5}, 1fr);\n                gap: 5px;\n            }\n\n            .cell, .key {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                border-radius: var(--letter-border-radius);\n                height: 50px;\n                width: 50px;\n                font-size: 40px;\n                text-transform: uppercase;\n                box-sizing: border-box;\n                cursor: pointer;\n                box-shadow: var(--letter-box-shadow);\n            }\n\n            .cell {\n                background-color: var(--letter-background-color);\n                border: solid 1px var(--border-color);\n                color: var(--letter-color);\n            }\n\n            .key {\n                background-color: var(--action-background-color);\n                border: solid 1px var(--action-border-color);\n                color: var(--action-color);\n                user-select: none;\n            }\n\n            .start {\n                background-color: var(--letter-background-color-start);\n                border-color: var(--letter-border-color-start);\n                color: var(--letter-color-start);\n                box-shadow: var(--letter-box-shadow-start);\n            }\n\n            .end {\n                background-color: var(--letter-background-color-end);\n                border-color: var(--letter-border-color-end);\n                color: var(--letter-color-end);\n                box-shadow: var(--letter-box-shadow-end);\n            }\n\n            .active {\n                border: solid 2px var(--letter-border-color-active);\n                background-color: var(--letter-background-color-active);\n            }\n\n            .trash {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                height: 50px;\n                width: 50px;\n                font-size: 30px;\n                cursor: pointer;\n                user-select: none;\n            }\n        `;\n\n        shadowRoot.append(style);\n\n        const startWord = state.words[0];\n        const endWord = state.words[5];\n        const words = state.flipped ? [...state.words].reverse() : state.words;\n\n        words.forEach((w, y) => {\n            const actualY = state.flipped ? 5 - y : y;\n            const row = document.createElement('div');\n            row.className = 'row';\n\n            w.forEach((l, x) => {\n                const cell = document.createElement('div');\n\n                cell.classList.add('cell');\n                if (startWord.indexOf(l) !== -1) cell.classList.add('start');\n                if (endWord.indexOf(l) !== -1) cell.classList.add('end');\n                if (!state.finished && x === state.position.x && actualY === state.position.y && actualY < 5) cell.classList.add('active');\n                cell.textContent = l;\n                if (l !== ' ') cell.addEventListener('click', () => this.letterPress(l))\n\n                row.append(cell);\n            });\n\n            if (!state.finished && interactive) {\n                if (y === (state.flipped ? 5 - state.position.y : state.position.y)) {\n                    if (state.position.x > 0) {\n                        const key = document.createElement('div');\n\n                        key.textContent = '';\n                        key.className = 'key';\n                        key.addEventListener('click', () => this.backspacePress())\n                        row.append(key);\n                    }\n\n                    if (state.position.x === 5) {\n                        const key = document.createElement('div');\n\n                        key.textContent = '';\n                        key.className = 'key';\n                        key.addEventListener('click', () => this.enterPress())\n                        row.append(key);\n                    }\n                } else if (\n                    (!state.flipped && state.position.y > 1 && y === state.position.y - 1) ||\n                    (state.flipped && state.position.y < 4 && y === 5 - state.position.y - 1)\n                ) {\n                    const key = document.createElement('div');\n\n                    key.textContent = '';\n                    key.className = 'trash';\n                    key.addEventListener('click', () => this.trashPress())\n                    row.append(key);\n                }\n            }\n\n            shadowRoot.append(row);\n        });\n    }\n\n    letterPress(letter) {\n        this.dispatchEvent(new CustomEvent('letterPress', { detail: { letter } }));\n    }\n\n    enterPress() {\n        this.dispatchEvent(new CustomEvent('enterPress'));\n    }\n\n    backspacePress() {\n        this.dispatchEvent(new CustomEvent('backspacePress'));\n    }\n\n    trashPress() {\n        this.dispatchEvent(new CustomEvent('trashPress'));\n    }\n}\n\ncustomElements.define('game-board', GameBoard);\n","export const numStars = (s) => Math.max(0, 5 - Math.floor(s / 60));\n\nexport const loadFile = (file) => fetch(file).then((response) => response.text()).then((text) => text.split('\\n'));\n\nexport const key = () => {\n    const d = new Date(); // local time\n\n    return `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}-${String(d.getDate()).padStart(2, '0')}`;\n}\n\nexport const level = () => Date.parse(key()) / 86400000 % 5;\n\nexport const getHistory = () => JSON.parse(localStorage.getItem('history')) ?? {};\n\nexport const putHistory = (history) => localStorage.setItem('history', JSON.stringify(history));\n\nexport const isEmpty = (obj) => Object.keys(obj).length === 0;\n\nexport const isFinished = (words) => words.every((w) => w.every((l) => l !== ' '));\n","import { numStars } from './utils.mjs';\n\nexport class GameStars extends HTMLElement {\n    constructor(seconds) {\n        super();\n\n        const n = numStars(seconds);\n\n        const shadowRoot = this.attachShadow({ mode: 'open' });\n        const style = document.createElement('style');\n\n        style.textContent = `\n            :host {\n                display: flex;\n                gap: 10px;\n                font-size: 40px;\n            }\n        `;\n\n        shadowRoot.append(style);\n\n        for (let i = 0; i < n; i++) {\n            const star = document.createElement('div');\n            star.textContent = '';\n\n            if (i === n - 1) {\n                star.style.opacity = 1 - (seconds % 60) / 60;\n            }\n\n            shadowRoot.append(star);\n        }\n    }\n}\n\ncustomElements.define('game-stars', GameStars);\n","export class PopupMessage extends HTMLElement {\n    constructor(type) {\n        super();\n\n        const shadowRoot = this.attachShadow({ mode: 'open' });\n        shadowRoot.append(template.content.cloneNode(true));\n        shadowRoot.addEventListener('click', (e) => this.handleClick(e));\n    }\n\n    handleClick(event) {\n        if (event.target.nodeName === 'BUTTON') {\n            this.dispatchEvent(new CustomEvent('buttonClick', { detail: { name: event.target.textContent } }));\n        }\n    }\n}\n\ncustomElements.define('popup-message', PopupMessage);\n\nconst template = document.createElement('template');\n\ntemplate.innerHTML = `\n    <style>\n        :host {\n            position: fixed;\n            top: var(--popup-top);\n            left: 50%;\n            transform: translate(-50%, 0);\n            width: 300px;\n            font-size: 20px;\n            border: solid 1px var(--popup-border-color);\n            border-radius: var(--popup-border-radius);\n            background-color: var(--popup-background-color);\n            text-align: center;\n            box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.25);\n        }\n\n        div {\n            padding: 10px;\n            color: var(--popup-color);\n        }\n\n        .error {\n            color: red;\n        }\n\n        .success {\n            color: green;\n        }\n        </style>\n    <div class=\"popup\">\n        <slot name=\"content\"></slot>\n    </div>\n`;\n","import { GameBoard } from \"./game-board.mjs\";\nimport { GameStars } from \"./game-stars.mjs\";\n\nconst state = {\n    words: [\n        'chart'.split(''),\n        '     '.split(''),\n        '     '.split(''),\n        '     '.split(''),\n        '     '.split(''),\n        'spiel'.split('')\n    ],\n    position: { x: 0, y: 1 }\n};\n\nexport class PopupHelp extends HTMLElement {\n    constructor(type) {\n        super();\n\n        const shadowRoot = this.attachShadow({ mode: 'open' });\n        shadowRoot.append(template.content.cloneNode(true));\n        shadowRoot.addEventListener('click', (e) => this.handleClick(e));\n\n        const game0 = shadowRoot.getElementById('game-0');\n        game0.append(new GameBoard({\n            words: [\n                'chart'.split(''),\n                '     '.split(''),\n                '     '.split(''),\n                '     '.split(''),\n                '     '.split(''),\n                'spiel'.split('')\n            ],\n            position: { x: 0, y: 1 }\n        }, false));\n\n        const game1 = shadowRoot.getElementById('game-1');\n        game1.append(new GameBoard({\n            ...state,\n            words: [\n                'chart'.split(''),\n                'trash'.split(''),\n                '     '.split(''),\n                '     '.split(''),\n                '     '.split(''),\n                'spiel'.split('')\n            ],\n            position: { x: 0, y: 2 }\n        }, false));\n\n        const game2 = shadowRoot.getElementById('game-2');\n        game2.append(new GameBoard({\n            ...state,\n            words: [\n                'chart'.split(''),\n                'trash'.split(''),\n                'stare'.split(''),\n                '     '.split(''),\n                '     '.split(''),\n                'spiel'.split('')\n            ],\n            position: { x: 0, y: 3 }\n        }, false));\n\n        const game3 = shadowRoot.getElementById('game-3');\n        game3.append(new GameBoard({\n            ...state,\n            words: [\n                'chart'.split(''),\n                'trash'.split(''),\n                'stare'.split(''),\n                '     '.split(''),\n                '     '.split(''),\n                'spiel'.split('')\n            ],\n            position: { x: 0, y: 4 },\n            flipped: true\n        }, false));\n\n        const game4 = shadowRoot.getElementById('game-4');\n        game4.append(new GameBoard({\n            ...state,\n            words: [\n                'chart'.split(''),\n                'trash'.split(''),\n                'stare'.split(''),\n                '     '.split(''),\n                'lapse'.split(''),\n                'spiel'.split('')\n            ],\n            position: { x: 0, y: 3 },\n            flipped: true\n        }, false));\n\n        const game5 = shadowRoot.getElementById('game-5');\n        game5.append(new GameBoard({\n            ...state,\n            words: [\n                'chart'.split(''),\n                'trash'.split(''),\n                'stare'.split(''),\n                'spear'.split(''),\n                'lapse'.split(''),\n                'spiel'.split('')\n            ],\n            finished: true,\n            position: { x: 0, y: 3 },\n            flipped: true\n        }, false));\n\n        const stars = shadowRoot.getElementById('stars');\n        stars.append(new GameStars(0));\n    }\n\n    handleClick(event) {\n        if (event.target.nodeName === 'BUTTON') {\n            this.dispatchEvent(new CustomEvent('buttonClick', { detail: { name: event.target.textContent } }));\n        }\n    }\n}\n\ncustomElements.define('popup-help', PopupHelp);\n\nconst template = document.createElement('template');\n\ntemplate.innerHTML = `\n    <style>\n        :host {\n            position: fixed;\n            top: var(--popup-top);\n            left: 50%;\n            transform: translate(-50%, 0);\n            width: 350px;\n            font-size: 20px;\n            border: solid 1px var(--popup-border-color);\n            border-radius: var(--popup-border-radius);\n            background-color: var(--popup-background-color);\n            box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.25);\n        }\n\n        h1 {\n            text-align: center;\n            margin: 0;\n            font-size: 30px;\n        }\n\n        div {\n            padding: 10px;\n            color: var(--popup-color);\n        }\n\n        .scroll {\n            border: solid 1px var(--popup-border-color);\n            border-radius: var(--popup-border-radius);\n            height: 400px;\n            overflow-y: scroll;\n        }\n\n        .center { text-align: center; }\n\n        .footer {\n            font-size: 30px;\n            text-align: center;\n        }\n\n        button {\n            font-size: 20px;\n        }\n\n        #stars {\n            margin-left: 20px;\n        }\n\n        a {\n        color: var(--link-color);\n        }\n    </style>\n    <div>\n        <h1>ANAGRAMISH</h1>\n        <p class=\"center\">by <a target=\"_blank\" href=\"http://twitter.com/emh\">emh</a></p>\n\n        <div class=\"scroll\">\n            <h1>How to Play</h1>\n            <p>The game board has a start word and an end word.</p>\n            <div id=\"game-0\"></div>\n            <p>Your goal is to find words that use 4 letters from the word above and 1 letter from the word at the bottom. In any order - like an anagram!</p>\n            <div id=\"game-1\"></div>\n            <p>Repeat this until you've filled in all 4 words.</p>\n            <div id=\"game-2\"></div>\n            <p>If you're stuck on a word you can try working the puzzle in the other direction by clicking the Flip button.</p>\n            <div id=\"game-3\"></div>\n            <p>Now, same as before, find a word that uses 4 letters from the word above and 1 letter from the word at the bottom.</p>\n            <div id=\"game-4\"></div>\n            <p>You win the game when you fill in the last word.</p>\n            <div id=\"game-5\"></div>\n            <p>Your score is the number of stars still showing -- you lose a star for every minute you're working on the puzzle.</p>\n            <div id=\"stars\"></div>\n            <p>Ready?</p>\n        </div>\n        <div class=\"footer\">\n            <button>Game on!</button>\n        </div>\n    </div>\n`;\n","export class SummaryChart extends HTMLElement {\n    constructor(stats) {\n        super();\n\n        const shadowRoot = this.attachShadow({ mode: 'open' });\n        const style = document.createElement('style');\n\n        style.textContent = `\n            :host {\n                display: flex;\n                align-items: center;\n                flex-direction: column;\n            }\n\n            #chart > div {\n                display: flex;\n            }\n\n            #chart > div > div {\n                width: 25px;\n                height: 25px;\n                font-size: 10px;\n            }\n        `;\n\n        shadowRoot.append(style);\n\n        const div = document.createElement('div');\n        div.id = \"chart\";\n\n        div.innerHTML = `\n            <div>\n                <div></div><div></div><div></div><div></div><div></div>\n                <div>${stats[0][0]}</div><div>${stats[0][1]}</div><div>${stats[0][2]}</div><div>${stats[0][3]}</div><div>${stats[0][4]}</div><div>${stats[0][5]}</div>\n            </div>\n\n            <div>\n                <div></div><div></div><div></div><div></div><div></div>\n                <div>${stats[1][0]}</div><div>${stats[1][1]}</div><div>${stats[1][2]}</div><div>${stats[1][3]}</div><div>${stats[1][4]}</div><div>${stats[1][5]}</div>\n            </div>\n\n            <div>\n                <div></div><div></div><div></div><div></div><div></div>\n                <div>${stats[2][0]}</div><div>${stats[2][1]}</div><div>${stats[2][2]}</div><div>${stats[2][3]}</div><div>${stats[2][4]}</div><div>${stats[2][5]}</div>\n            </div>\n\n            <div>\n                <div></div><div></div><div></div><div></div><div></div>\n                <div>${stats[3][0]}</div><div>${stats[3][1]}</div><div>${stats[3][2]}</div><div>${stats[3][3]}</div><div>${stats[3][4]}</div><div>${stats[3][5]}</div>\n            </div>\n\n            <div>\n                <div></div><div></div><div></div><div></div><div></div>\n                <div>${stats[4][0]}</div><div>${stats[4][1]}</div><div>${stats[4][2]}</div><div>${stats[4][3]}</div><div>${stats[4][4]}</div><div>${stats[4][5]}</div>\n            </div>\n\n            <div>\n                <div></div><div></div><div></div><div></div><div></div>\n                <div></div><div></div><div></div><div></div><div></div><div></div>\n            </div>\n\n            <div>\n                <div></div><div></div><div></div><div></div><div></div>\n                <div></div><div></div><div></div><div></div><div></div><div></div>\n            </div>\n\n            <div>\n                <div></div><div></div><div></div><div></div><div></div>\n                <div></div><div></div><div></div><div></div><div></div><div></div>\n            </div>\n\n            <div>\n                <div></div><div></div><div></div><div></div><div></div>\n                <div></div><div></div><div></div><div></div><div></div><div></div>\n            </div>\n\n            <div>\n                <div></div><div></div><div></div><div></div><div></div>\n                <div></div><div></div><div></div><div></div><div></div><div></div>\n            </div>\n        `;\n\n        shadowRoot.append(div);\n    }\n}\n\ncustomElements.define('summary-chart', SummaryChart);\n\n","export class HistoryChart extends HTMLElement {\n    constructor(stats) {\n        super();\n\n        const shadowRoot = this.attachShadow({ mode: 'open' });\n        const style = document.createElement('style');\n\n        style.textContent = `\n            :host {\n                text-align: left;\n                font-size: 12px;\n            }\n        `;\n\n        shadowRoot.append(style);\n\n        const div = document.createElement('div');\n        div.id = \"chart\";\n\n        console.log(stats);\n\n        div.innerHTML = stats.map((entry) => {\n            return `<div>\n                ${''.repeat(4 - entry.level)}${''.repeat(entry.level + 1)}\n                ${entry.date}\n                ${''.repeat(entry.stars)}\n            </div>`;\n        }).join('');\n\n        shadowRoot.append(div);\n    }\n}\n\ncustomElements.define('history-chart', HistoryChart);\n\n","import { SummaryChart } from \"./summary-chart.mjs\";\nimport { HistoryChart } from \"./history-chart.mjs\";\nimport { key, numStars } from \"./utils.mjs\";\n\nconst levelFromCount = (count) => {\n    if (count < 10) return 4;\n    if (count < 40) return 3;\n    if (count < 160) return 2;\n    if (count < 640) return 1;\n\n    return 0;\n}\n\nexport class PopupStats extends HTMLElement {\n    constructor(history) {\n        console.log(history);\n        super();\n\n        const shadowRoot = this.attachShadow({ mode: 'open' });\n        shadowRoot.append(template.content.cloneNode(true));\n        shadowRoot.addEventListener('click', (e) => this.handleClick(e));\n\n        const summaryStats = [\n            [0, 0, 0, 0, 0, 0],\n            [0, 0, 0, 0, 0, 0],\n            [0, 0, 0, 0, 0, 0],\n            [0, 0, 0, 0, 0, 0],\n            [0, 0, 0, 0, 0, 0]\n        ];\n\n        const historyStats = [];\n        const keys = Object.keys(history);\n\n        keys.sort().forEach((k) => {\n            const game = history[k];\n            const level = levelFromCount(game.pair[2]);\n\n            if (k === key()) return;\n\n            const stars = game.finished ? numStars(game.numSeconds) : 0;\n\n            historyStats.push({ date: k, level, stars });\n            summaryStats[level][stars]++;\n        });\n\n        console.log(summaryStats, historyStats);\n\n        const summaryDiv = shadowRoot.getElementById('summary');\n        summaryDiv.append(new SummaryChart(summaryStats));\n\n        const historyDiv = shadowRoot.getElementById('history');\n        historyDiv.append(new HistoryChart(historyStats));\n    }\n\n    handleClick(event) {\n        if (event.target.nodeName === 'BUTTON') {\n            this.dispatchEvent(new CustomEvent('buttonClick', { detail: { name: event.target.textContent } }));\n        }\n    }\n}\n\ncustomElements.define('popup-stats', PopupStats);\n\nconst template = document.createElement('template');\n\ntemplate.innerHTML = `\n    <style>\n        :host {\n            position: fixed;\n            top: var(--popup-top);\n            left: 50%;\n            transform: translate(-50%, 0);\n            width: 400px;\n            font-size: 20px;\n            border: solid 1px var(--popup-border-color);\n            border-radius: var(--popup-border-radius);\n            background-color: var(--popup-background-color);\n            box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.25);\n        }\n\n        h1 {\n            text-align: center;\n            margin: 0;\n            font-size: 30px;\n        }\n\n        div {\n            padding: 10px;\n            color: var(--popup-color);\n        }\n\n        .scroll {\n            border: solid 1px var(--popup-border-color);\n            border-radius: var(--popup-border-radius);\n            height: 400px;\n            overflow-y: scroll;\n            text-align: center;\n        }\n\n        .footer {\n            font-size: 30px;\n            text-align: center;\n        }\n\n        button {\n            font-size: 20px;\n        }\n\n        #history {\n            padding-left: 40px;\n        }\n    </style>\n    <div>\n        <h1>ANAGRAMISH: Stats</h1>\n\n        <div class=\"scroll\">\n            <h1>Summary</h1>\n            <div id=\"summary\"></div>\n            <h1>History</h1>\n            <div id=\"history\"></div>\n        </div>\n        <div class=\"footer\">\n            <button>Game on!</button>\n        </div>\n    </div>\n`;\n","const sortByCh = (str) => str.toUpperCase().split('').sort();\n\nconst compare = (ch1, ch2) => {\n    if (ch1.length === 0 || ch2.length === 0) return 0;\n\n    if (ch1[0] < ch2[0]) return compare(ch1.slice(1), ch2);\n    if (ch1[0] > ch2[0]) return compare(ch1, ch2.slice(1));\n\n    return 1 + compare(ch1.slice(1), ch2.slice(1));\n};\n\nexport const compareWords = (w1, w2) => compare(sortByCh(w1), sortByCh(w2));\n\nexport const isLetter = (s) => s.length === 1 && ((s >= 'a' && s <= 'z') || (s >= 'A' && s <= 'Z'));\n","'use strict';\n\nimport { ThemeManager } from './theme.js';\n\nimport { VirtualKeyboard } from './virtual-keyboard.mjs';\nimport { GameBoard } from './game-board.mjs';\nimport { GameStars } from './game-stars.mjs';\nimport { PopupMessage } from './popup-message.mjs';\nimport { PopupHelp } from './popup-help.mjs';\nimport { PopupStats } from './popup-stats.mjs';\n\nimport { compareWords, isLetter } from './words.mjs';\nimport { numStars, loadFile, key, getHistory, putHistory, isEmpty, isFinished, level } from './utils.mjs';\n\nimport pairsFile from './pairs.txt';\nimport dictFile from './dictionary.txt';\n\nfunction goal(name) {\n    try {\n        clicky.goal(name);\n    } catch (e) {\n        console.error('Error logging goal', name, e);\n    }\n}\n\nfunction loadGame() {\n    const history = getHistory();\n\n    return history[key()];\n}\n\nfunction saveGame(game) {\n    const history = getHistory();\n\n    history[key()] = game;\n\n    putHistory(history);\n}\n\nfunction parse(pairs) {\n    return pairs.map((pair) => {\n        const pieces = pair.split(',');\n\n        return [pieces[0], pieces[1], Number(pieces[2])];\n    });\n}\n\nconst countForLevel = (level) => level === 0 ? 10000 : Math.pow(2, 10 - ((1 + level) * 2)) * 10;\n\nconst checkCount = (pair, minCount, maxCount) => {\n    const count = pair[2];\n\n    return count >= minCount && count < maxCount;\n}\n\nconst calcIndex = (n) => {\n    var d = Date.parse(key());\n\n    const f = Math.PI - 3; // need a number > 0 and < 1\n    const s = d.valueOf() / 1000;\n    const r = (s * f) - Math.floor(s * f);\n    const i = Math.floor(n * r);\n\n    return i;\n}\n\nfunction choosePair(pairs, level) {\n    const maxCount = countForLevel(level);\n    const minCount = level === 4 ? 1 : countForLevel(level + 1);\n\n    const filteredPairs = pairs.filter((pair) => checkCount(pair, minCount, maxCount));\n    const n = filteredPairs.length;\n    const i = calcIndex(n);\n\n    return filteredPairs[i];\n}\n\nfunction renderBoard(state) {\n    const container = document.getElementById('board');\n    const gameBoard = new GameBoard(state);\n\n    container.innerHTML = '';\n    container.append(gameBoard);\n\n    setupBoardHandler(state);\n}\n\nfunction renderKeyboard(state) {\n    const container = document.getElementById('keyboard');\n    const validLetters = [...state.words[0], ...state.words[5]];\n\n    const control = (value) => ({ value, control: true });\n    const letter = (value) => ({ value, disabled: !validLetters.includes(value) });\n    const keys = [\n        [control('Flip ')],\n        [],\n        ['q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p'].map(letter),\n        ['a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l'].map(letter),\n        [control(''), ...['z', 'x', 'c', 'v', 'b', 'n', 'm'].map(letter), control('')]\n    ];\n\n    const keyboard = new VirtualKeyboard(keys);\n\n    container.innerHTML = '';\n    container.append(keyboard);\n}\n\nfunction initWords(pair) {\n    const words = [\n        pair[0],\n        '     ',\n        '     ',\n        '     ',\n        '     ',\n        pair[1]\n    ].map((w) => w.split(''));\n\n    return words;\n}\n\nfunction calculateStats(history) {\n    let streak = 0;\n    const keys = Object.keys(history);\n    let pk = null;\n\n    keys.sort().forEach((k) => {\n        const game = history[k];\n\n        console.log(game, k !== key(), pk && new Date(k) - new Date(pk) > 86400000);\n\n        if ((!game.finished && k !== key()) || (pk && new Date(k) - new Date(pk) > 86400000)) {\n            console.log('reset streak a');\n            streak = 0;\n        }\n\n        if (game.finished) {\n            console.log('increment streak');\n            streak++;\n        }\n\n        pk = k;\n    });\n\n    console.log(pk, key());\n\n    if (pk && new Date(key()) - new Date(pk) > 86400000) {\n        console.log('reset streak b');\n        streak = 0;\n    }\n\n    return { level: level(), streak };\n}\n\nfunction initTodaysGame(pairs, level) {\n    const pair = choosePair(pairs, level);\n\n    return {\n        pair,\n        numSeconds: 0,\n        flips: 0,\n        trashes: 0,\n        guesses: 0\n    };\n}\n\nfunction init(pairs, dict) {\n    const history = getHistory();\n    const { level, streak } = calculateStats(history);\n    let game = loadGame();\n\n    if (!game) {\n        game = initTodaysGame(pairs, level);\n        saveGame(game);\n    }\n\n    return {\n        started: false,\n        dict,\n        level,\n        streak,\n        finished: game.finished,\n        words: game.finished ? game.words : initWords(game.pair),\n        position: { x: 0, y: 1 },\n        newUser: isEmpty(history)\n    };\n}\n\nfunction handleBackspace(state) {\n    if (state.position.x > 0) {\n        state.position.x -= 1;\n        state.words[state.position.y][state.position.x] = ' ';\n    }\n}\n\nfunction handleLetterInput(state, letter) {\n    if (state.position.x < 5 && state.position.y > 0 && state.position.y < 5) {\n        state.words[state.position.y][state.position.x] = letter;\n\n        state.position.x = state.position.x + 1;\n    }\n}\n\nconst emojiletters = {\n    a: '',\n    b: '',\n    c: '',\n    d: '',\n    e: '',\n    f: '',\n    g: '',\n    h: '',\n    i: '',\n    j: '',\n    k: '',\n    l: '',\n    m: '',\n    n: '',\n    o: '',\n    p: '',\n    q: '',\n    r: '',\n    s: '',\n    t: '',\n    u: '',\n    v: '',\n    w: '',\n    x: '',\n    y: '',\n    z: '',\n    black: '',\n    yellow: '',\n    star: '',\n    timer: '',\n    flip: '',\n    trash: '',\n    guess: ''\n};\n\nfunction emojiWord(word) {\n    return word.map((letter) => emojiletters[letter]).join(' ');\n}\n\nfunction emojiLevel(level) {\n    const word = [];\n\n    for (let i = 0; i < 5; i++) {\n        word.push(i <= level ? emojiletters.yellow : emojiletters.black);\n    }\n\n    return word.join(' ');\n}\n\nconst time = (s) => `${String(Math.floor(s / 60)).padStart(2, '0')}:${String(s % 60).padStart(2, '0') }`;\n\nfunction emojiStats({ guesses = 0, numSeconds = 0, flips = 0, trashes = 0 },  { streak }) {\n    return [\n        ` ${time(numSeconds)}  ${streak}`,\n        ` ${guesses}  ${flips}  ${trashes}`\n    ];\n}\n\nfunction showSuccess(state) {\n    const game = loadGame();\n    const n = numStars(game.numSeconds);\n\n    const message = `\n        <p>You solved it!</p>\n        <p>You earned ${n} star${n !== 1 ? 's' : ''}<br/>\n        ${state.streak === 1 ? 'and you started a new streak' : `and your streak is ${state.streak}`}.</p>\n        <div>\n        ${emojiWord(state.words[0])}<br/>\n        ${emojiLevel(state.level)}<br/>\n        ${emojiStats(game, state).join('<br>')}<br/>\n        ${emojiWord(state.words[5])}\n        </div>\n        <p>Have you played <br/><a href=\"https://emh.io/cards/ps\">Poker Squares</a>?</p>\n        <p id=\"copied\">Copied to clipboard.</p>\n        <div class=\"buttons\">\n        <button>Share</button>\n        <button>Copy</button>\n        <button>OK</button>\n        </div>\n    `;\n\n    const app = document.getElementById('app');\n    const popup = new PopupMessage('success');\n    const div = document.createElement('div');\n\n    div.setAttribute('id', 'popup');\n    div.setAttribute('slot', 'content');\n    div.innerHTML = message;\n    popup.addEventListener('buttonClick', (e) => {\n        const { name } = e.detail;\n\n        if (name === 'Share' || name === 'Copy') {\n            goal('Shared');\n\n            const share = [\n                'Anagramish by @emh',\n                emojiWord(state.words[0]),\n                emojiLevel(state.level),\n                emojiStats(game, state).join('\\n'),\n                emojiWord(state.words[5]),\n                '',\n                'https://anagramish.com'\n            ];\n\n            const data = {\n                title: 'Anagramish',\n                text: share.join('\\n')\n            };\n\n            if (name === 'Share' && navigator.canShare && navigator.canShare(data)) {\n                navigator.share(data);\n            } else {\n                const div = document.querySelector('#copied');\n                div.style.visibility = \"visible\";\n\n                navigator.clipboard.writeText(data.text);\n            }\n        } else if (name === '*') {\n            navigator.clipboard.writeText(localStorage.getItem('history'));\n        } else {\n            app.removeChild(popup);\n        }\n    });\n    popup.append(div);\n    app.appendChild(popup);\n}\n\nfunction handleEnter(state) {\n    if (state.position.x === 5 && state.position.y < 5) {\n        const game = loadGame();\n        game.guesses += 1;\n        saveGame(game);\n\n        const y = state.position.y;\n        const word = state.words[y].join('');\n        const previousWord = state.words[state.flipped ? y + 1 : y - 1].join('');\n        const nextWord = state.words[state.flipped ? y - 1 : y + 1].join('');\n        const firstWord = state.words[state.flipped ? 5 : 0].join('');\n        const lastWord = state.words[state.flipped ? 0 : 5].join('');\n\n        const hasNextWord = nextWord !== '     ';\n\n        const classesFor = (l) => {\n            const classes = ['letter'];\n\n            if (state.words[0].indexOf(l) !== -1) classes.push('start');\n            if (state.words[5].indexOf(l) !== -1) classes.push('end');\n\n            return classes.join(' ');\n        };\n\n        const renderWord = (word) => {\n            const letters = word.split('');\n\n            return `<div class=\"word\">${letters.map((l) => `<span class=\"${classesFor(l)}\">${l}</span>`).join('')}</div>`;\n        };\n\n        if (!state.dict.includes(word)) {\n            showError('Not a word.', y);\n        } else if (compareWords(word, previousWord) !== 4) {\n            showError(`${renderWord(word)}<p>can only be one letter different from</p>${renderWord(previousWord)}`);\n        } else if (hasNextWord && compareWords(word, nextWord) !== 4) {\n            showError(`${renderWord(word)}<p>can only be one letter different from</p>${renderWord(nextWord)}`);\n        } else if (compareWords(word, firstWord) !== (state.flipped ? y : 5 - y) || compareWords(word, lastWord) !== (state.flipped ? 5 - y : y)) {\n            showError(`<p>You have to use ${5 - y} letter${y === 4 ? '' : 's'} from</p>${renderWord(state.words[0].join(''))}<p>and ${y} letter${y === 1 ? '' : 's'} from</p>${renderWord(state.words[5].join(''))}`);\n        } else {\n            goal('Entered Word');\n\n            state.position.y += state.flipped ? -1 : 1;\n            state.position.x = 0;\n\n            if (isFinished(state.words)) {\n                goal('Game Finished');\n\n                if (state.timer) {\n                    clearInterval(state.timer);\n                }\n\n                const game = loadGame();\n\n                state.streak++;\n                state.finished = true;\n\n                game.finished = true;\n                game.words = state.words;\n                saveGame(game);\n\n                showSuccess(state);\n            }\n        }\n    }\n}\n\nfunction handleDeleteWord(state) {\n    const game = loadGame();\n    game.trashes += 1;\n    saveGame(game);\n\n    state.words[state.position.y] = '     '.split('');\n    state.position.y -= state.flipped ? -1 : 1;\n    state.words[state.position.y] = '     '.split('');\n}\n\nconst emptyWord = (word) => word.join('') === '     ';\n\nfunction handleFlip(state) {\n    const game = loadGame();\n    game.flips += 1;\n    saveGame(game);\n\n    state.flipped = !state.flipped;\n    state.words[state.position.y] = '     '.split('');\n    state.position.x = 0;\n    state.position.y = state.flipped ? state.words.findLastIndex(emptyWord) : state.words.findIndex(emptyWord);\n}\n\nfunction clearPopup() {\n    const app = document.getElementById('app');\n    const popup = app.querySelector('popup-message');\n\n    if (popup) {\n        app.removeChild(popup);\n\n        return true;\n    }\n\n    return false;\n}\n\nfunction setupKeyboardHandler(state) {\n    const keyboard = document.querySelector('virtual-keyboard');\n\n    keyboard.addEventListener('keypress', (event) => {\n        const key = event.detail.key;\n\n        if (state.position.y < 5) {\n            if (key === '') {\n                handleBackspace(state);\n            } else if (key === '') {\n                handleEnter(state);\n            } else if (key.length === 1) {\n                handleLetterInput(state, key);\n            } else if (key.startsWith('Flip')) {\n                handleFlip(state);\n            }\n\n            renderBoard(state);\n        }\n    });\n\n    document.addEventListener('keydown', (e) => {\n        if (!state.finished) {\n            if (clearPopup()) return;\n\n            switch (e.key) {\n                case 'Backspace':\n                    handleBackspace(state);\n                    break;\n                case 'Enter':\n                    handleEnter(state);\n                    break;\n                default:\n                    if (isLetter(e.key)) {\n                        const letter = e.key.toLowerCase();\n\n                        if (state.words[0].includes(letter) || state.words[5].includes(letter)) {\n                            handleLetterInput(state, letter);\n                        }\n                    } else {\n                        console.log(e.key);\n                    }\n            }\n\n            renderBoard(state);\n        }\n    });\n}\n\nfunction setupBoardHandler(state) {\n    const div = document.querySelector('game-board');\n\n    div.addEventListener('letterPress', (event) => {\n        if (!state.started || state.finshed) return;\n\n        const letter = event.detail.letter;\n\n        handleLetterInput(state, letter);\n\n        renderBoard(state);\n    });\n\n    div.addEventListener('enterPress', () => {\n        handleEnter(state);\n        renderBoard(state);\n    });\n\n    div.addEventListener('backspacePress', () => {\n        handleBackspace(state);\n        renderBoard(state);\n    });\n\n    div.addEventListener('trashPress', () => {\n        handleDeleteWord(state);\n        renderBoard(state);\n    });\n}\n\nfunction showError(message) {\n    const app = document.getElementById('app');\n    const error = new PopupMessage('error');\n\n    const content = document.createElement('div');\n    content.setAttribute('slot', 'content');\n    content.innerHTML = `${message}<br/><br/><div class=\"buttons\"><button>OK</button>`;\n\n    error.append(content);\n    app.append(error);\n\n    error.addEventListener('buttonClick', (e) => {\n        app.removeChild(error);\n    });\n}\n\nfunction showHelp() {\n    const app = document.getElementById('app');\n    const popup = new PopupHelp();\n\n    popup.addEventListener('buttonClick', (event) => {\n        app.removeChild(popup);\n    });\n\n    app.appendChild(popup);\n}\n\nfunction showStats() {\n    const app = document.getElementById('app');\n    const popup = new PopupStats(getHistory());\n\n    popup.addEventListener('buttonClick', (event) => {\n        app.removeChild(popup);\n    });\n\n    app.appendChild(popup);\n}\n\nfunction showPopup(state) {\n    return new Promise((resolve) => {\n        const app = document.getElementById('app');\n        const popup = new PopupMessage();\n\n        const div = document.createElement('div');\n        div.setAttribute('slot', 'content');\n        let message = '';\n\n        if (state.newUser) {\n            message = `\n                <p>Welcome to ANAGRAMISH.</p><p>Find the four words that connect the first word to the last.</p><p>Each word in between must use four letters from the word above it and 1 letter from the bottom word.</p>\n            `;\n        } else {\n            message = `\n                <p>Welcome back.</p>\n                ${state.streak > 0 ?\n                    `<p>Your streak is currently ${state.streak}.</p>` :\n                    '<p>Starting a new streak today - come back daily to keep it going.'\n                }\n            `;\n        }\n\n        div.innerHTML = `\n            ${message}\n            <p>Good luck!</p>\n            <div class=\"buttons\">\n                <button>Help</button>\n                <button>Start</button>\n            </div>\n        `;\n\n        popup.append(div);\n\n        popup.addEventListener('buttonClick', (event) => {\n            const { name } = event.detail;\n\n            if (name === 'Start') {\n                app.removeChild(popup);\n                state.started = true;\n                resolve();\n            } else {\n                showHelp();\n            }\n        });\n\n        app.appendChild(popup);\n    });\n}\n\nfunction renderStars(seconds) {\n    const div = document.getElementById('stars');\n    const stars = new GameStars(seconds);\n\n    div.innerHTML = '';\n    div.append(stars);\n}\n\nfunction startClock(state) {\n    const fn = () => {\n        const game = loadGame();\n        game.numSeconds += 1;\n        saveGame(game);\n\n        renderStars(game.numSeconds);\n    };\n\n    fn();\n\n    state.timer = setInterval(fn, 1000);\n}\n\nfunction render(state) {\n    renderBoard(state);\n    renderKeyboard(state);\n}\n\nfunction fixHistoryDates() {\n    const history = getHistory();\n\n    const keys = Object.keys(history);\n\n    console.log(keys);\n\n    keys.forEach((key) => {\n        const match = key.match(/(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})/);\n\n        if (match) {\n            const newKey = `${match[3]}-${match[1].padStart(2, '0')}-${match[2].padStart(2, '0')}`;\n\n            history[newKey] = history[key];\n\n            delete history[key];\n        }\n    });\n\n    putHistory(history)\n}\n\nasync function main() {\n    fixHistoryDates();\n\n    const pairs = await loadFile(pairsFile);\n    const dict = await loadFile(dictFile);\n    const state = init(parse(pairs), dict);\n\n    const themeManager = new ThemeManager();\n    window.themeManager = themeManager;\n\n    render(state);\n\n    const help = document.getElementById('help');\n    help.addEventListener('click', (e) => {\n        e.preventDefault();\n        showHelp();\n    });\n\n    const stats = document.getElementById('stats');\n    stats.addEventListener('click', (e) => {\n        e.preventDefault();\n        showStats();\n    });\n\n    if (state.finished) {\n        showSuccess(state);\n    } else {\n        showPopup(state).then(() => {\n            setupKeyboardHandler(state);\n            startClock(state);\n        });\n    }\n}\n\nmain();\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}